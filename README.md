# ðŸŒ GIS å¯è§†åŒ–ä¸Žç©ºé—´åˆ†æžå¹³å°
## ðŸš€ é¡¹ç›®æŒ‡ä»¤
#### å¯åŠ¨é¡¹ç›®

```bash
pnpm run dev
```
#### æž„å»ºé¡¹ç›®
```bash
pnpm run build
```

#### è¿è¡Œé¡¹ç›®
```bash
pnpm run start
```

#### è¿è¡Œæµ‹è¯•
```bash
pnpm run test
```
---
## ðŸ“Œ é¡¹ç›®ä»‹ç»
è¿™æ˜¯ä¸€ä¸ªåŸºäºŽ Web çš„ GIS å¯è§†åŒ–å’Œç©ºé—´åˆ†æžå¹³å°ï¼Œé›†æˆäº† Agent æ™ºèƒ½ä½“åŠŸèƒ½ï¼Œæ”¯æŒï¼š
- å¤šæºåº•å›¾åŠ è½½ä¸Žåˆ‡æ¢
- æ˜¼å¤œæ¨¡å¼åˆ‡æ¢
- åœ°å›¾çŠ¶æ€ç®¡ç†
- æ•°æ®å¤„ç†ä¸Žåˆ†æž
- GISæ™ºèƒ½ä½“åˆ†æž

## ðŸ› ï¸ æŠ€æœ¯æ ˆ
- å‰ç«¯æ¡†æž¶: React (æ ¹æ®å®žé™…é¡¹ç›®å¡«å†™)
- æ ·å¼æ¡†æž¶: Ant Design
- çŠ¶æ€ç®¡ç†: Zustand
- æž„å»ºå·¥å…·: pnpm
- GIS å¼•æ“Ž: GeoScene API for JavaScript
- ç©ºé—´åˆ†æžå·¥å…·: Turf

## ðŸ“¦ å…·ä½“åŠŸèƒ½
- é€†åœ°ç†ç¼–ç ï¼šç‚¹å‡»åœ°å›¾ä¸Šçš„ç‚¹è¿›è¡Œé€†åœ°ç†ç¼–ç 
- èŽ·å–å¤©æ°”ï¼šé€šè¿‡è§†å›¾ä¸­å¿ƒç‚¹èŽ·å–å¤©æ°”
- çŸ¢é‡è¦ç´ ç±»
  - é€šè¿‡geoserverç®¡ç†
  - åŠ è½½çŸ¢é‡è¦ç´ ç±»
  - çŸ¢é‡è¦ç´ å¼¹æ¡†æ˜¾ç¤ºå¯ä»¥ç¼–è¾‘æ•°æ®æˆ–åˆ é™¤
  - çŸ¢é‡è¦ç´ å¼¹æ¡†å¯ä»¥è®¾ç½®ç¼–è¾‘å½¢çŠ¶å’Œä½ç½®
  - åˆ†å‰²çº¿åˆ‡å‰²
  - ä¸Šä¼ shpæ–‡ä»¶åŠ è½½ï¼ˆåŽç«¯å¤„ç†ï¼‰
  - ä¸Šä¼ geojsonæ–‡ä»¶åŠ è½½ï¼ˆåŽç«¯å¤„ç†ï¼‰
- å›¾å±‚åˆ—è¡¨
  - æŸ¥çœ‹å›¾å±‚å±žæ€§
  - å›¾å±‚çš„å­—æ®µåˆ—è¡¨
  - å›¾å±‚çš„è¦ç´ è¾¹æ¡†å’Œé¢œè‰²çš„æ¸²æŸ“
  - å›¾ä¾‹çš„æ¸²æŸ“
- ç©ºé—´åˆ†æžåˆ†æž
  - ç¼“å†²åŒºåˆ†æž(turfï¼Œï¼ˆå¯ä»¥è®¾ç½®è·ç¦»èŒƒå›´ï¼ˆæ¶‰åŠå•ä¸ªç‚¹ã€çº¿ã€é¢ï¼‰ï¼‰)
  - æœ€å¤§å¤–ç•ŒçŸ©å½¢
  -  å¤šè¾¹å½¢è´¨å¿ƒï¼ˆå†…éƒ¨çš„ç‚¹ï¼‰
  -  

## ðŸ”— ç›¸å…³èµ„æº
- [GeoScene API for JavaScript æ–‡æ¡£](https://doc.geoscene.cn/javascript/4.29/api-reference/index.html)
- [Antdesignæ–‡æ¡£](https://ant.design/components/overview-cn)
- [å›¾æ ‡åº“](https://www.iconfont.cn/)
- [é«˜å¾·åŠ¨å›¾APIæ–‡æ¡£](https://lbs.amap.com/api/webservice/summary)
- [DataV.GeoAtlasåœ°ç†å°å·¥å…·ç³»åˆ—](https://datav.aliyun.com/portal/school/atlas/area_selector)
- [Arcgis apiå­¦ä¹ -å“”å“©å“”å“©è§†é¢‘](https://space.bilibili.com/326281584?spm_id_from=333.337.0.0)
- [GeoScene Online](https://www.geosceneonline.cn/geoscene/webapps/mapViewer)
- [geojson.io | powered by Mapbox](https://geojson.io/#map=2/0/20)
- [DeepSeek - æŽ¢ç´¢æœªè‡³ä¹‹å¢ƒ](https://chat.deepseek.com/)
- [å¤©åœ°å›¾ æœåŠ¡ä¸­å¿ƒ geojsonä¸‹è½½](https://cloudcenter.tianditu.gov.cn/administrativeDivision/)
- [ä¸ªäººBlogs: Liao-dorian`s blogs](https://gitee.com/Liao-dorian/myblogs)
- [å‚è€ƒMyé¡¹ç›®](https://gitee.com/Liao-dorian/umijs-load-map)
- [35ä¸ªåœ¨çº¿åœ°å›¾ç“¦ç‰‡URLåˆ†äº«_åœ¨çº¿åœ°å›¾æŽ¥å£-CSDNåšå®¢](https://blog.csdn.net/mrib/article/details/141326671)
- [å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯~-bilibili](https://www.bilibili.com/)
- [å¿«é€Ÿä¸Šæ‰‹ - SiliconFlow](https://docs.siliconflow.cn/cn/userguide/quickstart)
- [Agent  å­¦ä¹   å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1g4E4zsEoY/?spm_id_from=333.788.player.switch&vd_source=3c46a0d84476a55380be0c2ddd012af1&p=2)

## ðŸ—³ æ•°æ®åº“è®¾è®¡

userè¡¨ï¼šæ˜µç§°ï¼ˆnicknameï¼‰ã€è´¦å·ï¼ˆusernameï¼‰ã€å¯†ç ï¼ˆpasswordï¼‰ã€å·¥ä½œå•ä½ï¼ˆwork_unitï¼‰ã€ä¸ªäººç®€ä»‹ã€é»˜è®¤åº•å›¾URL(base_map_url)ã€é»˜è®¤åº•å›¾åç§°(base_map_name)ã€ä¸­å¿ƒç‚¹(center)ã€ç¼©æ”¾å¤§å°(zoom)ã€å¤´åƒ(avatar)

```sql
CREATE TABLE users (
    -- ä¸»é”®æ ‡è¯†
    id BIGSERIAL PRIMARY KEY,
    
    -- ç”¨æˆ·èº«ä»½ä¿¡æ¯
    nickname VARCHAR(50) NOT NULL,
    username VARCHAR(20) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL, -- å¢žåŠ é•¿åº¦ä»¥å®¹çº³åŠ å¯†å¯†ç 
    
    -- èŒä¸šä¿¡æ¯
    work_unit VARCHAR(100),
    email VARCHAR(100) NOT NULL, -- æ ‡å‡†é‚®ç®±é•¿åº¦
    
    -- ä¸ªäººä»‹ç»
    personal_intro TEXT, -- æ”¹ä¸ºTEXTç±»åž‹æ”¯æŒæ›´é•¿å†…å®¹
    
    -- åœ°å›¾ç›¸å…³åå¥½è®¾ç½®
    base_map_url VARCHAR(500),
    base_map_name VARCHAR(50), -- å¢žåŠ é•¿åº¦
    center_x DECIMAL(10, 7) DEFAULT 116.805, -- ä¿®æ­£ä¸ºåŒ—äº¬ç»åº¦ï¼Œå¢žåŠ ç²¾åº¦
    center_y DECIMAL(10, 7) DEFAULT 34.567, -- ä¿®æ­£ä¸ºåŒ—äº¬çº¬åº¦
    zoom SMALLINT DEFAULT 4,
    
    -- å¤´åƒä¿¡æ¯
    avatar VARCHAR(500),
    
    -- ç³»ç»Ÿç®¡ç†å­—æ®µ
    status SMALLINT DEFAULT 1,
    is_deleted BOOLEAN DEFAULT FALSE, -- æ·»åŠ ç¼ºå¤±å­—æ®µ
    
    -- æ—¶é—´æˆ³å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- çº¦æŸæ¡ä»¶
    CONSTRAINT chk_status CHECK (status IN (0, 1, 2)),
    CONSTRAINT chk_zoom_range CHECK (zoom >= 0 AND zoom <= 20),
);

-- åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
CREATE INDEX idx_users_username ON users(username);
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_status ON users(status);
CREATE INDEX idx_users_is_deleted ON users(is_deleted);
CREATE INDEX idx_users_created_at ON users(created_at);

-- æ³¨é‡Š
COMMENT ON TABLE users IS 'ç³»ç»Ÿç”¨æˆ·è¡¨ï¼Œå­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€åœ°å›¾åå¥½è®¾ç½®å’Œè®¤è¯ä¿¡æ¯';
COMMENT ON COLUMN users.id IS 'ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œè‡ªå¢žä¸»é”®';
COMMENT ON COLUMN users.nickname IS 'ç”¨æˆ·æ˜µç§°ï¼Œç”¨äºŽæ˜¾ç¤ºï¼Œæœ€å¤§é•¿åº¦50å­—ç¬¦';
COMMENT ON COLUMN users.username IS 'ç™»å½•è´¦å·ï¼Œå¿…é¡»å”¯ä¸€ï¼Œæœ€å¤§é•¿åº¦100å­—ç¬¦';
COMMENT ON COLUMN users.password IS 'åŠ å¯†åŽçš„å¯†ç ï¼Œå»ºè®®ä½¿ç”¨bcryptç­‰å¼ºåŠ å¯†æ–¹å¼';
COMMENT ON COLUMN users.work_unit IS 'å·¥ä½œå•ä½ä¿¡æ¯ï¼Œå¯é€‰å­—æ®µ';
COMMENT ON COLUMN users.personal_intro IS 'ä¸ªäººç®€ä»‹ï¼Œæ”¯æŒé•¿æ–‡æœ¬å†…å®¹';
COMMENT ON COLUMN users.base_map_url IS 'é»˜è®¤åº•å›¾URLåœ°å€ï¼Œç”¨äºŽä¸ªæ€§åŒ–åœ°å›¾æ˜¾ç¤º';
COMMENT ON COLUMN users.base_map_name IS 'é»˜è®¤åº•å›¾åç§°ï¼Œå¦‚"å¤©åœ°å›¾"ã€"è°·æ­Œå«æ˜Ÿå›¾"ç­‰';
COMMENT ON COLUMN users.center_x IS 'åœ°å›¾ä¸­å¿ƒç‚¹Xåæ ‡ï¼ˆç»åº¦ï¼‰ï¼Œé»˜è®¤åŒ—äº¬ç»åº¦';
COMMENT ON COLUMN users.center_y IS 'åœ°å›¾ä¸­å¿ƒç‚¹Yåæ ‡ï¼ˆçº¬åº¦ï¼‰ï¼Œé»˜è®¤åŒ—äº¬çº¬åº¦';
COMMENT ON COLUMN users.zoom IS 'åœ°å›¾ç¼©æ”¾çº§åˆ«ï¼Œé»˜è®¤10çº§ï¼ŒèŒƒå›´0-20';
COMMENT ON COLUMN users.avatar IS 'å¤´åƒå›¾ç‰‡URLåœ°å€ï¼Œæ”¯æŒæœ¬åœ°è·¯å¾„æˆ–ç½‘ç»œåœ°å€';
COMMENT ON COLUMN users.email IS 'ç”µå­é‚®ç®±ï¼Œç”¨äºŽæ‰¾å›žå¯†ç ç­‰æ“ä½œ';
COMMENT ON COLUMN users.status IS 'ç”¨æˆ·çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸ï¼Œ2-æœªæ¿€æ´»';
COMMENT ON COLUMN users.is_deleted IS 'è½¯åˆ é™¤æ ‡è®°ï¼štrue-å·²åˆ é™¤ï¼Œfalse-æ­£å¸¸';
COMMENT ON COLUMN users.created_at IS 'è®°å½•åˆ›å»ºæ—¶é—´';
COMMENT ON COLUMN users.updated_at IS 'è®°å½•æœ€åŽæ›´æ–°æ—¶é—´';


-- åˆ›å»ºæ›´æ–°updated_atå­—æ®µçš„å‡½æ•°
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

-- åˆ›å»ºè§¦å‘å™¨ï¼šåœ¨æ›´æ–°æ•°æ®æ—¶è‡ªåŠ¨æ›´æ–°updated_atå­—æ®µ
CREATE TRIGGER update_users_updated_at
    BEFORE UPDATE ON users
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();
```

